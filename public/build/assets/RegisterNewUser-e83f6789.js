import{t as B,K as W,r as _,o as H,b as c,c as h,a as n,d as s,s as X,F as I,y as D,T as Y,z as v,u as t,w as M,Z as ee,j as i,g as S,v as P,B as j,k as T,n as se,l as oe,e as le,f as z,i as ae,p as te,q as re,x as ne}from"./app-82b4bc19.js";import{a as ie,_ as de}from"./LocaleCycler-1548f98f.js";import{_ as ue}from"./MustUpdateLocale-2ac3c19c.js";import{a as me,_ as ce,u as pe}from"./SaveLocaleBeforeUnload-e4d87b7e.js";import{_ as g}from"./InputError-f247962a.js";import{P as ge}from"./ProcessingButton-c73d55e7.js";import{_ as U}from"./SwitchTwoState-13fcedac.js";import{_ as q}from"./PasswordEye-76580126.js";import{u as _e}from"./useLocalStorage-896d7344.js";import{u as he}from"./useSessionStorage-6e2da231.js";const fe={class:"w-full sm:max-w-md mt-6 px-6 py-4 bg-orange-100/80 dark:bg-green-800/80 shadow-md overflow-hidden sm:rounded-lg"},we={__name:"HighLayout",setup(f){const $=B(W().props.background),V=_(null);return H(()=>{V.value.style.backgroundImage="url('"+$.img+"')",V.value.style.backgroundPosition=$.position}),(w,F)=>(c(),h(I,null,[n(ue),n(me),s("div",{class:"min-h-screen flex flex-col sm:justify-center items-center pt-6 sm:pt-0 bg-orange-200 dark:bg-green-600 border-b border-amber-100 dark:border-emerald-600 w-full h-[1440px] bg-cover",ref_key:"backgroundDiv",ref:V},[s("div",null,[n(ie)]),s("div",fe,[X(w.$slots,"default")])],512)],64))}};const K=f=>(te("data-v-44d4be96"),f=f(),re(),f),ve=K(()=>s("audio",{id:"processingButtonAudio",src:"/audio/processingbutton1.mp3",preload:"auto"},null,-1)),be=["onSubmit"],ye={class:"flex justify-between items-start"},Se={class:"mt-1 mb-2 text-lg text-orange-800 dark:text-amber-100 font-semibold"},$e={for:"register-userId",class:"labelStyle"},Ve=["placeholder"],ke={class:"mt-4"},Ne={for:"register-password",class:"labelStyle"},Ce={class:"mt-4"},xe={for:"register-password-confirmation",class:"labelStyle"},Pe={class:"mt-4"},Ue={for:"register-userName",class:"labelStyle"},Ie=["placeholder"],Le={class:"mt-4"},Be={for:"register-email",class:"labelStyle"},Fe=["placeholder"],Je={class:"mt-4"},Oe={for:"register-locale",class:"labelStyle"},Ae={value:"0"},Ee=["value"],Re={class:"mt-4"},De={for:"register-pronoun",class:"labelStyle"},Me={value:"0"},je=["value"],Te={class:"switchStyle"},ze={class:"labelSpanStyle"},qe={class:"switchStyle"},He={class:"switchStyle"},Ke={class:"labelSpanStyle"},Ze={class:"switchStyle"},Ge={class:"labelSpanStyle"},Qe={class:"mt-4"},We={for:"register-captcha",class:"labelSpanStyle"},Xe={class:"flex flex-row place-items-center py-3"},Ye=["src"],es={key:1,class:"animate-pulse w-56 h-9 border-2 border-slate-300 rounded-sm"},ss=K(()=>s("div",{class:"px-2 grid grid-cols-6 gap-2 h-full w-full items-center"},[s("div",{class:"h-2 bg-slate-200 rounded-md col-span-3"}),s("div",{class:"h-2 bg-slate-200 rounded-md col-span-1"}),s("div",{class:"h-2 bg-slate-200 rounded-md col-span-2"})],-1)),os=[ss],ls=["onClick"],as=["placeholder"],ts={class:"mt-4 mb-1 flex flex-row-reverse"},rs={__name:"RegisterNewUser",props:{locales:{type:Array},pronouns:{type:Array}},setup(f){const $=f;let{changeLocaleAxios:V}=pe();const w=ne(),F=a=>{w.appContext.config.globalProperties.$setLocale(a),V(a)};let{getLocal:d,removeLocal:u,setLocal:m}=_e(),{getSession:J,removeSession:O,setSession:A}=he();const r="register-create",Z=B($.locales),G=D(()=>B($.pronouns).filter(o=>o.locale_id===Number(b.value))),e=Y({user_id:d(r,"user_id",""),password:J(r,"password",""),password_confirmation:J(r,"password_confirmation",""),name:d(r,"name",""),email:d(r,"email",""),locale_id:Number(d(r,"locale_id","0")),pronoun_id:Number(d(r,"pronoun_id","0")),show_name:JSON.parse(d(r,"show_name","true")),show_pronoun:JSON.parse(d(r,"show_pronoun","true")),show_email:JSON.parse(d(r,"show_email","true")),show_user_id:JSON.parse(d(r,"show_user_id","true")),captcha:""}),p=_(e.show_name),k=_(e.show_pronoun),N=_(e.show_email),C=_(e.show_user_id),b=_(e.locale_id),y=_(e.pronoun_id),Q=()=>{document.getElementById("processingButtonAudio").play(),e.post(route("register.store"),{onSuccess:()=>{u(r,"user_id"),O(r,"password"),O(r,"password_confirmation"),u(r,"name"),u(r,"email"),u(r,"locale_id"),u(r,"pronoun_id"),u(r,"show_name"),u(r,"show_pronoun"),u(r,"show_email"),u(r,"show_user_id"),w.appContext.config.globalProperties.$setFlash(w.appContext.config.globalProperties.$msg.success,w.appContext.config.globalProperties.$msg.successStoreProfile)}})},x=_(null),L=async()=>{x.value=null,e.captcha="",await axios.get("/api/captcha-reload").then(a=>{x.value=a.data.url}).catch(a=>{console.log(a)})},E=D(()=>e.errors.captcha!=null?w.appContext.config.globalProperties.$msg.captchaValidation:void 0);H(()=>{L(),document.getElementById("register-userId").focus()}),v(b,()=>{m(r,"locale_id",b.value);let a=Number(b.value);if(e.locale_id=a,a>0){const l=Z.find(o=>o.id===a);F(l.locale)}y.value="0",e.pronoun_id=0}),v(y,()=>{m(r,"pronoun_id",y.value),e.pronoun_id=Number(y.value)}),v(p,()=>{e.show_name=p.value,m(r,"show_name",JSON.stringify(e.show_name)),p.value||(k.value=!1,e.show_pronoun=!1)}),v(k,()=>{e.show_pronoun=k.value,m(r,"show_pronoun",JSON.stringify(e.show_pronoun))}),v(N,()=>{e.show_email=N.value,m(r,"show_email",JSON.stringify(e.show_email))}),v(C,()=>{e.show_user_id=C.value,m(r,"show_user_id",JSON.stringify(e.show_user_id))}),v(E,()=>{L()});const R="block mt-1 w-full rounded-md shadow-sm bg-amber-100 dark:bg-lime-100 focus:bg-amber-200 focus:dark:bg-lime-200 border-amber-200 dark:border-emerald-700 focus:ring focus:ring-amber-300 focus:dark:ring-emerald-900 focus:ring-opacity-50";return(a,l)=>(c(),h(I,null,[n(t(ee),{title:a.$msg.registerNewUser},null,8,["title"]),ve,n(we,null,{default:M(()=>[s("form",{onSubmit:z(Q,["prevent"])},[s("div",ye,[s("h3",Se,i(a.$msg.registerNewUser),1),n(de,{class:"mt-1"})]),s("div",null,[s("label",$e,i(a.$msg.userId),1),S(s("input",{"onUpdate:modelValue":l[0]||(l[0]=o=>t(e).user_id=o),id:"register-userId",type:"text",class:"userFieldStyle",placeholder:a.$msg.userIdPlaceholder,onChange:l[1]||(l[1]=o=>t(m)(r,"user_id",t(e).user_id))},null,40,Ve),[[P,t(e).user_id]]),n(g,{message:t(e).errors.user_id,class:"mt-2"},null,8,["message"])]),s("div",ke,[s("label",Ne,i(a.$msg.password),1),n(q,{modelValue:t(e).password,"onUpdate:modelValue":l[2]||(l[2]=o=>t(e).password=o),id:"register-password",placeholder:a.$msg.passwordPlaceholder,textFieldClass:R,onChange:l[3]||(l[3]=o=>t(A)(r,"password",t(e).password))},null,8,["modelValue","placeholder"]),n(g,{message:t(e).errors.password,class:"mt-2"},null,8,["message"])]),s("div",Ce,[s("label",xe,i(a.$msg.passwordConfirmation),1),n(q,{modelValue:t(e).password_confirmation,"onUpdate:modelValue":l[4]||(l[4]=o=>t(e).password_confirmation=o),id:"register-password-confirmation",placeholder:a.$msg.passwordConfirmationPlaceholder,textFieldClass:R,onChange:l[5]||(l[5]=o=>t(A)(r,"password_confirmation",t(e).password_confirmation))},null,8,["modelValue","placeholder"]),n(g,{message:t(e).errors.password_confirmation,class:"mt-2"},null,8,["message"])]),s("div",Pe,[s("label",Ue,i(a.$msg.userName),1),S(s("input",{"onUpdate:modelValue":l[6]||(l[6]=o=>t(e).name=o),id:"register-userName",type:"text",class:"fieldStyle",placeholder:a.$msg.userNamePlaceholder,onChange:l[7]||(l[7]=o=>t(m)(r,"name",t(e).name))},null,40,Ie),[[P,t(e).name]]),n(g,{message:t(e).errors.name,class:"mt-2"},null,8,["message"])]),s("div",Le,[s("label",Be,i(a.$msg.email),1),S(s("input",{"onUpdate:modelValue":l[8]||(l[8]=o=>t(e).email=o),id:"register-email",type:"text",class:"fieldStyle",placeholder:a.$msg.emailPlaceholder,onChange:l[9]||(l[9]=o=>t(m)(r,"email",t(e).email))},null,40,Fe),[[P,t(e).email]]),n(g,{message:t(e).errors.email,class:"mt-2"},null,8,["message"])]),s("div",Je,[s("label",Oe,i(a.$msg.localePreferred),1),S(s("select",{"onUpdate:modelValue":l[10]||(l[10]=o=>b.value=o),id:"register-locale",class:"fieldStyle"},[s("option",Ae,"-- "+i(a.$msg.localeSelect)+" --",1),(c(!0),h(I,null,T(f.locales,o=>(c(),h("option",{value:o.id,key:o.id},i(o.name),9,Ee))),128))],512),[[j,b.value]]),n(g,{message:t(e).errors.locale_id,class:"mt-2"},null,8,["message"])]),s("div",Re,[s("label",De,i(a.$msg.pronoun),1),S(s("select",{"onUpdate:modelValue":l[11]||(l[11]=o=>y.value=o),id:"register-pronoun",class:"fieldStyle"},[s("option",Me,"-- "+i(a.$msg.pronounSelect)+" --",1),(c(!0),h(I,null,T(t(G),o=>(c(),h("option",{value:o.id,key:o.id},i(o.pronoun),9,je))),128))],512),[[j,y.value]]),n(g,{message:t(e).errors.pronoun_id,class:"mt-2"},null,8,["message"])]),s("div",Te,[s("span",ze,i(a.$msg.showName),1),n(U,{modelValue:p.value,"onUpdate:modelValue":l[12]||(l[12]=o=>p.value=o)},null,8,["modelValue"])]),s("div",qe,[s("span",{class:se(["labelSpanStyle",{"line-through":!p.value,"text-gray-400":!p.value}])},i(a.$msg.showPronoun),3),p.value?(c(),oe(U,{key:0,modelValue:k.value,"onUpdate:modelValue":l[13]||(l[13]=o=>k.value=o)},null,8,["modelValue"])):le("",!0)]),s("div",He,[s("span",Ke,i(a.$msg.showEmail),1),n(U,{modelValue:N.value,"onUpdate:modelValue":l[14]||(l[14]=o=>N.value=o)},null,8,["modelValue"])]),s("div",Ze,[s("span",Ge,i(a.$msg.showUserId),1),n(U,{modelValue:C.value,"onUpdate:modelValue":l[15]||(l[15]=o=>C.value=o)},null,8,["modelValue"])]),s("div",Qe,[s("label",We,i(a.$msg.captcha),1),s("div",Xe,[x.value!==null?(c(),h("img",{key:0,src:x.value},null,8,Ye)):(c(),h("div",es,os)),s("button",{class:"ml-4 py-2 px-4 text-xl font-semibold w-fit text-orange-700 dark:text-amber-100 border-2 border-orange-700 dark:border-amber-100 rounded-md cursor-pointer",onClick:z(L,["prevent"])},"â†»",8,ls)]),S(s("input",{"onUpdate:modelValue":l[16]||(l[16]=o=>t(e).captcha=o),id:"register-captcha",type:"text",class:"fieldStyle",placeholder:a.$msg.captchaPlaceholder},null,8,as),[[P,t(e).captcha]]),n(g,{message:t(E),class:"mt-2"},null,8,["message"])]),s("div",ts,[n(ge,{modelValue:t(e).processing,"onUpdate:modelValue":l[17]||(l[17]=o=>t(e).processing=o),disabled:t(e).processing,class:"w-36"},{default:M(()=>[ae(i(a.$msg.save),1)]),_:1},8,["modelValue","disabled"])])],40,be)]),_:1})],64))}},fs=ce(rs,[["__scopeId","data-v-44d4be96"]]);export{fs as default};
