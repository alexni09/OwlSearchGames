import{y as $,t as D,K as C,r as I,T as M,o as A,z as K,c as h,a as d,u as s,w as N,l as V,d as e,j as r,e as T,J as R,F as Z,b as i,Z as q,f,g as _,v,h as E,i as z,p as G,q as H,x as J}from"./app-6411ff4c.js";import{C as L}from"./CompleteLayout-ccc637f1.js";import{_ as y}from"./InputError-376f5dba.js";import{P as O}from"./ProcessingButton-82013c5d.js";import{T as Q,a as W}from"./TrophyGold-5d0af9dc.js";import{u as X}from"./useCan-26537811.js";import{u as Y}from"./useSessionStorage-6e2da231.js";import{_ as ee}from"./SaveLocaleBeforeUnload-dd1d6f2e.js";import"./ArrowRectangleRight-d7a866e5.js";import"./MustUpdateLocale-e946e13b.js";const U=u=>(G("data-v-e7cf25e5"),u=u(),H(),u),se=U(()=>e("audio",{id:"processingButtonAudio",src:"/audio/processingbutton1.mp3",preload:"auto"},null,-1)),te={class:"max-w-2xl sm:max-w-3xl md:max-w-4xl mx-auto sm:px-6 lg:px-8"},oe={class:"bg-orange-50/80 dark:bg-green-800/80 overflow-hidden shadow-sm rounded-lg"},ae={class:"p-6 text-orange-800 dark:text-amber-200 font-semibold"},le={class:"flex flex-col justify-start"},ne={class:"mb-4 font-semibold text-2xl"},re=["onSubmit"],ce={for:"contact-name",class:"labelStyle"},de=["placeholder"],ie={class:"mt-4"},me={for:"contact-email",class:"labelStyle"},ue=["placeholder"],pe={class:"mt-4"},ge={for:"contact-message",class:"labelStyle"},he=["placeholder"],fe={class:"mt-4"},_e={for:"contact-captcha",class:"labelSpanStyle"},ve={class:"flex flex-row place-items-center py-3"},ye=["src"],be={key:1,class:"animate-pulse w-56 h-9 border-2 border-slate-300 rounded-sm"},xe=U(()=>e("div",{class:"px-2 grid grid-cols-6 gap-2 h-full w-full items-center"},[e("div",{class:"h-2 bg-slate-200 rounded-md col-span-3"}),e("div",{class:"h-2 bg-slate-200 rounded-md col-span-1"}),e("div",{class:"h-2 bg-slate-200 rounded-md col-span-2"})],-1)),Se=[xe],we=["onClick"],ke={class:"flex flex-row justify-between items-baseline"},$e={class:"flex flex-col justify-start"},Ce=["placeholder"],Ve={class:"flex flex-row-reverse"},Be={key:0},Pe={class:"flex flex-row place-items-center ml-8 sm:ml-1"},Fe={class:"scoreStyle"},Ie={class:"scoreStyle"},Ne={__name:"ContactForm",setup(u){let{can:B}=X(),{getSession:b,removeSession:x,setSession:m}=Y();const l="contact-form",p=J(),S=$(()=>Number(C().props.accumulatedScore)),c=$(()=>C().props.auth.user),P=D(C().props.background),w=I(null),t=M({user_id:null,name:b(l,"name",c.value?c.value.name:""),email:b(l,"email",c.value?c.value.email:""),message:b(l,"message",""),captcha:""});m(l,"name",t.name),m(l,"email",t.email),m(l,"message",t.message);const j=()=>{c.value&&(t.user_id=c.value.user_id),document.getElementById("processingButtonAudio").play(),t.post(route("contact.sendmail"),{onSuccess:()=>{x(l,"name"),x(l,"email"),x(l,"message"),p.appContext.config.globalProperties.$setFlash(p.appContext.config.globalProperties.$msg.success,p.appContext.config.globalProperties.$msg.successEmailHasBeenSent)}})},g=I(null),k=async()=>{g.value=null,t.captcha="",await axios.get(route("captcha.reload")).then(a=>{g.value=a.data.url}).catch(a=>{console.log(a)})},F=$(()=>t.errors.captcha!=null?p.appContext.config.globalProperties.$msg.captchaValidation:void 0);return A(()=>{w.value.style.backgroundImage="url('"+P.img+"')",w.value.style.backgroundPosition=P.position,k(),c.value?document.getElementById("contact-message").focus():document.getElementById("contact-name").focus()}),K(F,()=>{k()}),(a,o)=>(i(),h(Z,null,[d(s(q),{title:a.$msg.contactForm},null,8,["title"]),se,d(L,null,{default:N(()=>[e("div",{class:"py-12 w-full h-[1024px] bg-cover",ref_key:"backgroundDiv",ref:w},[e("div",te,[e("div",oe,[e("div",ae,[e("div",le,[e("h1",ne,r(a.$msg.contactForm),1),e("form",{onSubmit:f(j,["prevent"])},[e("div",null,[e("label",ce,r(a.$msg.yourName),1),_(e("input",{"onUpdate:modelValue":o[0]||(o[0]=n=>s(t).name=n),id:"contact-name",type:"text",class:"fieldStyle",placeholder:a.$msg.userNamePlaceholder,onChange:o[1]||(o[1]=n=>s(m)(l,"name",s(t).name))},null,40,de),[[v,s(t).name]]),d(y,{message:s(t).errors.name,class:"mt-2"},null,8,["message"])]),e("div",ie,[e("label",me,r(a.$msg.yourEmail),1),_(e("input",{"onUpdate:modelValue":o[2]||(o[2]=n=>s(t).email=n),id:"contact-email",type:"text",class:"fieldStyle",placeholder:a.$msg.emailPlaceholder,onChange:o[3]||(o[3]=n=>s(m)(l,"email",s(t).email))},null,40,ue),[[v,s(t).email]]),d(y,{message:s(t).errors.email,class:"mt-2"},null,8,["message"])]),e("div",pe,[e("label",ge,r(a.$msg.yourMessage),1),_(e("textarea",{"onUpdate:modelValue":o[4]||(o[4]=n=>s(t).message=n),id:"contact-message",class:"textAreaStyle",placeholder:a.$msg.messagePlaceholder,maxlength:"250",onChange:o[5]||(o[5]=n=>s(m)(l,"message",s(t).message))},null,40,he),[[v,s(t).message]]),d(y,{message:s(t).errors.message,class:"mt-2"},null,8,["message"])]),e("div",fe,[e("label",_e,r(a.$msg.captcha),1),e("div",ve,[g.value!==null?(i(),h("img",{key:0,src:g.value},null,8,ye)):(i(),h("div",be,Se)),e("button",{class:"ml-4 py-2 px-4 text-xl font-semibold w-fit text-orange-700 dark:text-amber-100 border-2 border-orange-700 dark:border-amber-100 rounded-md cursor-pointer",onClick:f(k,["prevent"])},"â†»",8,we)]),e("div",ke,[e("div",$e,[_(e("input",{"onUpdate:modelValue":o[6]||(o[6]=n=>s(t).captcha=n),id:"contact-captcha",type:"text",class:"captchaFieldStyle",placeholder:a.$msg.captchaPlaceholder,maxlength:"6",onKeydown:[o[7]||(o[7]=E(f(()=>{},["prevent"]),["enter"])),o[8]||(o[8]=E(f(()=>{},["prevent"]),["space"]))]},null,40,Ce),[[v,s(t).captcha]]),d(y,{message:s(F),class:"mt-2"},null,8,["message"])]),e("div",Ve,[d(O,{modelValue:s(t).processing,"onUpdate:modelValue":o[9]||(o[9]=n=>s(t).processing=n),disabled:s(t).processing,class:"w-36 h-fit"},{default:N(()=>[z(r(a.$msg.send),1)]),_:1},8,["modelValue","disabled"])])])])],40,re)])])])])],512)]),_:1}),s(S)!=null&&s(S)>0?(i(),h("div",Be,[(i(),V(R,{to:"#score"},[e("div",Pe,[e("span",Fe,r(a.$msg.score)+": ",1),e("span",Ie,r(s(S)),1),s(B)("trophy.gold")?(i(),V(Q,{key:0,class:"trophyStyle"})):s(B)("trophy.silver")?(i(),V(W,{key:1,class:"trophyStyle"})):T("",!0)])]))])):T("",!0)],64))}},qe=ee(Ne,[["__scopeId","data-v-e7cf25e5"]]);export{qe as default};
