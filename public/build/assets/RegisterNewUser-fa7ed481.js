import{t as F,K as X,r as _,o as H,b as c,c as h,a as n,d as s,s as Y,F as L,y as M,T as ee,z as b,u as t,w as j,Z as se,j as i,g as S,v as P,B as K,k as T,n as oe,l as le,e as ae,f as U,h as z,i as te,p as re,q as ne,x as ie}from"./app-790308f5.js";import{a as de,_ as ue}from"./LocaleCycler-7bb962e7.js";import{_ as me}from"./MustUpdateLocale-3060fe0e.js";import{a as ce,_ as pe,u as ge}from"./SaveLocaleBeforeUnload-ea190698.js";import{_ as g}from"./InputError-7f23e8a4.js";import{P as _e}from"./ProcessingButton-ac21ff61.js";import{_ as I}from"./SwitchTwoState-d42dbb05.js";import{_ as q}from"./PasswordEye-b6bff6e7.js";import{u as he}from"./useLocalStorage-896d7344.js";import{u as fe}from"./useSessionStorage-6e2da231.js";const we={class:"w-full sm:max-w-md mt-6 px-6 py-4 bg-orange-100/80 dark:bg-green-800/80 shadow-md overflow-hidden sm:rounded-lg"},be={__name:"HighLayout",setup(f){const $=F(X().props.background),V=_(null);return H(()=>{V.value.style.backgroundImage="url('"+$.img+"')",V.value.style.backgroundPosition=$.position}),(w,J)=>(c(),h(L,null,[n(me),n(ce),s("div",{class:"min-h-screen flex flex-col sm:justify-center items-center pt-6 sm:pt-0 bg-orange-200 dark:bg-green-600 border-b border-amber-100 dark:border-emerald-600 w-full h-[1440px] bg-cover",ref_key:"backgroundDiv",ref:V},[s("div",null,[n(de)]),s("div",we,[Y(w.$slots,"default")])],512)],64))}};const Z=f=>(re("data-v-3ba01ab2"),f=f(),ne(),f),ve=Z(()=>s("audio",{id:"processingButtonAudio",src:"/audio/processingbutton1.mp3",preload:"auto"},null,-1)),ye=["onSubmit"],Se={class:"flex justify-between items-start"},$e={class:"mt-1 mb-2 text-lg text-orange-800 dark:text-amber-100 font-semibold"},Ve={for:"register-userId",class:"labelStyle"},ke=["placeholder"],Ne={class:"mt-4"},Ce={for:"register-password",class:"labelStyle"},xe={class:"mt-4"},Pe={for:"register-password-confirmation",class:"labelStyle"},Ue={class:"mt-4"},Ie={for:"register-userName",class:"labelStyle"},Le=["placeholder"],Be={class:"mt-4"},Fe={for:"register-email",class:"labelStyle"},Je=["placeholder"],Oe={class:"mt-4"},Ae={for:"register-locale",class:"labelStyle"},Ee={value:"0"},Re=["value"],De={class:"mt-4"},Me={for:"register-pronoun",class:"labelStyle"},je={value:"0"},Ke=["value"],Te={class:"switchStyle"},ze={class:"labelSpanStyle"},qe={class:"switchStyle"},He={class:"switchStyle"},Ze={class:"labelSpanStyle"},Ge={class:"switchStyle"},Qe={class:"labelSpanStyle"},We={class:"mt-4"},Xe={for:"register-captcha",class:"labelSpanStyle"},Ye={class:"flex flex-row place-items-center py-3"},es=["src"],ss={key:1,class:"animate-pulse w-56 h-9 border-2 border-slate-300 rounded-sm"},os=Z(()=>s("div",{class:"px-2 grid grid-cols-6 gap-2 h-full w-full items-center"},[s("div",{class:"h-2 bg-slate-200 rounded-md col-span-3"}),s("div",{class:"h-2 bg-slate-200 rounded-md col-span-1"}),s("div",{class:"h-2 bg-slate-200 rounded-md col-span-2"})],-1)),ls=[os],as=["onClick"],ts=["placeholder"],rs={class:"mt-4 mb-1 flex flex-row-reverse"},ns={__name:"RegisterNewUser",props:{locales:{type:Array},pronouns:{type:Array}},setup(f){const $=f;let{changeLocaleAxios:V}=ge();const w=ie(),J=a=>{w.appContext.config.globalProperties.$setLocale(a),V(a)};let{getLocal:d,removeLocal:u,setLocal:m}=he(),{getSession:O,removeSession:A,setSession:E}=fe();const r="register-create",G=F($.locales),Q=M(()=>F($.pronouns).filter(l=>l.locale_id===Number(v.value))),e=ee({user_id:d(r,"user_id",""),password:O(r,"password",""),password_confirmation:O(r,"password_confirmation",""),name:d(r,"name",""),email:d(r,"email",""),locale_id:Number(d(r,"locale_id","0")),pronoun_id:Number(d(r,"pronoun_id","0")),show_name:JSON.parse(d(r,"show_name","true")),show_pronoun:JSON.parse(d(r,"show_pronoun","true")),show_email:JSON.parse(d(r,"show_email","true")),show_user_id:JSON.parse(d(r,"show_user_id","true")),captcha:""}),p=_(e.show_name),k=_(e.show_pronoun),N=_(e.show_email),C=_(e.show_user_id),v=_(e.locale_id),y=_(e.pronoun_id),W=()=>{document.getElementById("processingButtonAudio").play(),e.post(route("register.store"),{onSuccess:()=>{u(r,"user_id"),A(r,"password"),A(r,"password_confirmation"),u(r,"name"),u(r,"email"),u(r,"locale_id"),u(r,"pronoun_id"),u(r,"show_name"),u(r,"show_pronoun"),u(r,"show_email"),u(r,"show_user_id"),w.appContext.config.globalProperties.$setFlash(w.appContext.config.globalProperties.$msg.success,w.appContext.config.globalProperties.$msg.successStoreProfile)}})},x=_(null),B=async()=>{x.value=null,e.captcha="",await axios.get(route("captcha.reload")).then(a=>{x.value=a.data.url}).catch(a=>{console.log(a)})},R=M(()=>e.errors.captcha!=null?w.appContext.config.globalProperties.$msg.captchaValidation:void 0);H(()=>{B(),document.getElementById("register-userId").focus()}),b(v,()=>{m(r,"locale_id",v.value);let a=Number(v.value);if(e.locale_id=a,a>0){const o=G.find(l=>l.id===a);J(o.locale)}y.value="0",e.pronoun_id=0}),b(y,()=>{m(r,"pronoun_id",y.value),e.pronoun_id=Number(y.value)}),b(p,()=>{e.show_name=p.value,m(r,"show_name",JSON.stringify(e.show_name)),p.value||(k.value=!1,e.show_pronoun=!1)}),b(k,()=>{e.show_pronoun=k.value,m(r,"show_pronoun",JSON.stringify(e.show_pronoun))}),b(N,()=>{e.show_email=N.value,m(r,"show_email",JSON.stringify(e.show_email))}),b(C,()=>{e.show_user_id=C.value,m(r,"show_user_id",JSON.stringify(e.show_user_id))}),b(R,()=>{B()});const D="block mt-1 w-full rounded-md shadow-sm bg-amber-100 dark:bg-lime-100 focus:bg-amber-200 focus:dark:bg-lime-200 border-amber-200 dark:border-emerald-700 focus:ring focus:ring-amber-300 focus:dark:ring-emerald-900 focus:ring-opacity-50";return(a,o)=>(c(),h(L,null,[n(t(se),{title:a.$msg.registerNewUser},null,8,["title"]),ve,n(be,null,{default:j(()=>[s("form",{onSubmit:U(W,["prevent"])},[s("div",Se,[s("h3",$e,i(a.$msg.registerNewUser),1),n(ue,{class:"mt-1"})]),s("div",null,[s("label",Ve,i(a.$msg.userId),1),S(s("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>t(e).user_id=l),id:"register-userId",type:"text",class:"userFieldStyle",placeholder:a.$msg.userIdPlaceholder,onChange:o[1]||(o[1]=l=>t(m)(r,"user_id",t(e).user_id))},null,40,ke),[[P,t(e).user_id]]),n(g,{message:t(e).errors.user_id,class:"mt-2"},null,8,["message"])]),s("div",Ne,[s("label",Ce,i(a.$msg.password),1),n(q,{modelValue:t(e).password,"onUpdate:modelValue":o[2]||(o[2]=l=>t(e).password=l),id:"register-password",placeholder:a.$msg.passwordPlaceholder,textFieldClass:D,onChange:o[3]||(o[3]=l=>t(E)(r,"password",t(e).password))},null,8,["modelValue","placeholder"]),n(g,{message:t(e).errors.password,class:"mt-2"},null,8,["message"])]),s("div",xe,[s("label",Pe,i(a.$msg.passwordConfirmation),1),n(q,{modelValue:t(e).password_confirmation,"onUpdate:modelValue":o[4]||(o[4]=l=>t(e).password_confirmation=l),id:"register-password-confirmation",placeholder:a.$msg.passwordConfirmationPlaceholder,textFieldClass:D,onChange:o[5]||(o[5]=l=>t(E)(r,"password_confirmation",t(e).password_confirmation))},null,8,["modelValue","placeholder"]),n(g,{message:t(e).errors.password_confirmation,class:"mt-2"},null,8,["message"])]),s("div",Ue,[s("label",Ie,i(a.$msg.userName),1),S(s("input",{"onUpdate:modelValue":o[6]||(o[6]=l=>t(e).name=l),id:"register-userName",type:"text",class:"fieldStyle",placeholder:a.$msg.userNamePlaceholder,onChange:o[7]||(o[7]=l=>t(m)(r,"name",t(e).name))},null,40,Le),[[P,t(e).name]]),n(g,{message:t(e).errors.name,class:"mt-2"},null,8,["message"])]),s("div",Be,[s("label",Fe,i(a.$msg.email),1),S(s("input",{"onUpdate:modelValue":o[8]||(o[8]=l=>t(e).email=l),id:"register-email",type:"text",class:"fieldStyle",placeholder:a.$msg.emailPlaceholder,onChange:o[9]||(o[9]=l=>t(m)(r,"email",t(e).email))},null,40,Je),[[P,t(e).email]]),n(g,{message:t(e).errors.email,class:"mt-2"},null,8,["message"])]),s("div",Oe,[s("label",Ae,i(a.$msg.localePreferred),1),S(s("select",{"onUpdate:modelValue":o[10]||(o[10]=l=>v.value=l),id:"register-locale",class:"fieldStyle"},[s("option",Ee,"-- "+i(a.$msg.localeSelect)+" --",1),(c(!0),h(L,null,T(f.locales,l=>(c(),h("option",{value:l.id,key:l.id},i(l.name),9,Re))),128))],512),[[K,v.value]]),n(g,{message:t(e).errors.locale_id,class:"mt-2"},null,8,["message"])]),s("div",De,[s("label",Me,i(a.$msg.pronoun),1),S(s("select",{"onUpdate:modelValue":o[11]||(o[11]=l=>y.value=l),id:"register-pronoun",class:"fieldStyle"},[s("option",je,"-- "+i(a.$msg.pronounSelect)+" --",1),(c(!0),h(L,null,T(t(Q),l=>(c(),h("option",{value:l.id,key:l.id},i(l.pronoun),9,Ke))),128))],512),[[K,y.value]]),n(g,{message:t(e).errors.pronoun_id,class:"mt-2"},null,8,["message"])]),s("div",Te,[s("span",ze,i(a.$msg.showName),1),n(I,{modelValue:p.value,"onUpdate:modelValue":o[12]||(o[12]=l=>p.value=l)},null,8,["modelValue"])]),s("div",qe,[s("span",{class:oe(["labelSpanStyle",{"line-through":!p.value,"text-gray-400":!p.value}])},i(a.$msg.showPronoun),3),p.value?(c(),le(I,{key:0,modelValue:k.value,"onUpdate:modelValue":o[13]||(o[13]=l=>k.value=l)},null,8,["modelValue"])):ae("",!0)]),s("div",He,[s("span",Ze,i(a.$msg.showEmail),1),n(I,{modelValue:N.value,"onUpdate:modelValue":o[14]||(o[14]=l=>N.value=l)},null,8,["modelValue"])]),s("div",Ge,[s("span",Qe,i(a.$msg.showUserId),1),n(I,{modelValue:C.value,"onUpdate:modelValue":o[15]||(o[15]=l=>C.value=l)},null,8,["modelValue"])]),s("div",We,[s("label",Xe,i(a.$msg.captcha),1),s("div",Ye,[x.value!==null?(c(),h("img",{key:0,src:x.value},null,8,es)):(c(),h("div",ss,ls)),s("button",{class:"ml-4 py-2 px-4 text-xl font-semibold w-fit text-orange-700 dark:text-amber-100 border-2 border-orange-700 dark:border-amber-100 rounded-md cursor-pointer",onClick:U(B,["prevent"])},"â†»",8,as)]),S(s("input",{"onUpdate:modelValue":o[16]||(o[16]=l=>t(e).captcha=l),id:"register-captcha",type:"text",class:"fieldStyle",placeholder:a.$msg.captchaPlaceholder,maxlength:"6",onKeydown:[o[17]||(o[17]=z(U(()=>{},["prevent"]),["enter"])),o[18]||(o[18]=z(U(()=>{},["prevent"]),["space"]))]},null,40,ts),[[P,t(e).captcha]]),n(g,{message:t(R),class:"mt-2"},null,8,["message"])]),s("div",rs,[n(_e,{modelValue:t(e).processing,"onUpdate:modelValue":o[19]||(o[19]=l=>t(e).processing=l),disabled:t(e).processing,class:"w-36"},{default:j(()=>[te(i(a.$msg.save),1)]),_:1},8,["modelValue","disabled"])])],40,ye)]),_:1})],64))}},ws=pe(ns,[["__scopeId","data-v-3ba01ab2"]]);export{ws as default};
