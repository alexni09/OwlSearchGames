import{t as F,K as W,r as _,o as q,b as c,c as h,a as n,d as s,s as X,F as I,y as M,T as Y,z as v,u as t,w as j,Z as ee,j as i,g as S,v as P,B as K,k as T,n as se,l as oe,e as le,f as B,h as ae,i as te,p as re,q as ne,x as ie}from"./app-ef6d4df1.js";import{a as de,_ as ue}from"./LocaleCycler-99fbc245.js";import{_ as me}from"./MustUpdateLocale-e296399e.js";import{a as ce,_ as pe,u as ge}from"./SaveLocaleBeforeUnload-81d283f6.js";import{_ as g}from"./InputError-025e80ee.js";import{P as _e}from"./ProcessingButton-f972ff65.js";import{_ as U}from"./SwitchTwoState-b0b6703a.js";import{_ as z}from"./PasswordEye-99e907c8.js";import{u as he}from"./useLocalStorage-896d7344.js";import{u as fe}from"./useSessionStorage-6e2da231.js";const we={class:"w-full sm:max-w-md mt-6 px-6 py-4 bg-orange-100/80 dark:bg-green-800/80 shadow-md overflow-hidden sm:rounded-lg"},ve={__name:"HighLayout",setup(f){const $=F(W().props.background),V=_(null);return q(()=>{V.value.style.backgroundImage="url('"+$.img+"')",V.value.style.backgroundPosition=$.position}),(w,J)=>(c(),h(I,null,[n(me),n(ce),s("div",{class:"min-h-screen flex flex-col sm:justify-center items-center pt-6 sm:pt-0 bg-orange-200 dark:bg-green-600 border-b border-amber-100 dark:border-emerald-600 w-full h-[1440px] bg-cover",ref_key:"backgroundDiv",ref:V},[s("div",null,[n(de)]),s("div",we,[X(w.$slots,"default")])],512)],64))}};const H=f=>(re("data-v-7df753e0"),f=f(),ne(),f),be=H(()=>s("audio",{id:"processingButtonAudio",src:"/audio/processingbutton1.mp3",preload:"auto"},null,-1)),ye=["onSubmit"],Se={class:"flex justify-between items-start"},$e={class:"mt-1 mb-2 text-lg text-orange-800 dark:text-amber-100 font-semibold"},Ve={for:"register-userId",class:"labelStyle"},ke=["placeholder"],Ne={class:"mt-4"},Ce={for:"register-password",class:"labelStyle"},xe={class:"mt-4"},Pe={for:"register-password-confirmation",class:"labelStyle"},Ue={class:"mt-4"},Ie={for:"register-userName",class:"labelStyle"},Le=["placeholder"],Be={class:"mt-4"},Fe={for:"register-email",class:"labelStyle"},Je=["placeholder"],Oe={class:"mt-4"},Ae={for:"register-locale",class:"labelStyle"},Ee={value:"0"},Re=["value"],De={class:"mt-4"},Me={for:"register-pronoun",class:"labelStyle"},je={value:"0"},Ke=["value"],Te={class:"switchStyle"},ze={class:"labelSpanStyle"},qe={class:"switchStyle"},He={class:"switchStyle"},Ze={class:"labelSpanStyle"},Ge={class:"switchStyle"},Qe={class:"labelSpanStyle"},We={class:"mt-4"},Xe={for:"register-captcha",class:"labelSpanStyle"},Ye={class:"flex flex-row place-items-center py-3"},es=["src"],ss={key:1,class:"animate-pulse w-56 h-9 border-2 border-slate-300 rounded-sm"},os=H(()=>s("div",{class:"px-2 grid grid-cols-6 gap-2 h-full w-full items-center"},[s("div",{class:"h-2 bg-slate-200 rounded-md col-span-3"}),s("div",{class:"h-2 bg-slate-200 rounded-md col-span-1"}),s("div",{class:"h-2 bg-slate-200 rounded-md col-span-2"})],-1)),ls=[os],as=["onClick"],ts=["placeholder"],rs={class:"mt-4 mb-1 flex flex-row-reverse"},ns={__name:"RegisterNewUser",props:{locales:{type:Array},pronouns:{type:Array}},setup(f){const $=f;let{changeLocaleAxios:V}=ge();const w=ie(),J=a=>{w.appContext.config.globalProperties.$setLocale(a),V(a)};let{getLocal:d,removeLocal:u,setLocal:m}=he(),{getSession:O,removeSession:A,setSession:E}=fe();const r="register-create",Z=F($.locales),G=M(()=>F($.pronouns).filter(o=>o.locale_id===Number(b.value))),e=Y({user_id:d(r,"user_id",""),password:O(r,"password",""),password_confirmation:O(r,"password_confirmation",""),name:d(r,"name",""),email:d(r,"email",""),locale_id:Number(d(r,"locale_id","0")),pronoun_id:Number(d(r,"pronoun_id","0")),show_name:JSON.parse(d(r,"show_name","true")),show_pronoun:JSON.parse(d(r,"show_pronoun","true")),show_email:JSON.parse(d(r,"show_email","true")),show_user_id:JSON.parse(d(r,"show_user_id","true")),captcha:""}),p=_(e.show_name),k=_(e.show_pronoun),N=_(e.show_email),C=_(e.show_user_id),b=_(e.locale_id),y=_(e.pronoun_id),Q=()=>{document.getElementById("processingButtonAudio").play(),e.post(route("register.store"),{onSuccess:()=>{u(r,"user_id"),A(r,"password"),A(r,"password_confirmation"),u(r,"name"),u(r,"email"),u(r,"locale_id"),u(r,"pronoun_id"),u(r,"show_name"),u(r,"show_pronoun"),u(r,"show_email"),u(r,"show_user_id"),w.appContext.config.globalProperties.$setFlash(w.appContext.config.globalProperties.$msg.success,w.appContext.config.globalProperties.$msg.successStoreProfile)}})},x=_(null),L=async()=>{x.value=null,e.captcha="",await axios.get("/api/captcha-reload").then(a=>{x.value=a.data.url}).catch(a=>{console.log(a)})},R=M(()=>e.errors.captcha!=null?w.appContext.config.globalProperties.$msg.captchaValidation:void 0);q(()=>{L(),document.getElementById("register-userId").focus()}),v(b,()=>{m(r,"locale_id",b.value);let a=Number(b.value);if(e.locale_id=a,a>0){const l=Z.find(o=>o.id===a);J(l.locale)}y.value="0",e.pronoun_id=0}),v(y,()=>{m(r,"pronoun_id",y.value),e.pronoun_id=Number(y.value)}),v(p,()=>{e.show_name=p.value,m(r,"show_name",JSON.stringify(e.show_name)),p.value||(k.value=!1,e.show_pronoun=!1)}),v(k,()=>{e.show_pronoun=k.value,m(r,"show_pronoun",JSON.stringify(e.show_pronoun))}),v(N,()=>{e.show_email=N.value,m(r,"show_email",JSON.stringify(e.show_email))}),v(C,()=>{e.show_user_id=C.value,m(r,"show_user_id",JSON.stringify(e.show_user_id))}),v(R,()=>{L()});const D="block mt-1 w-full rounded-md shadow-sm bg-amber-100 dark:bg-lime-100 focus:bg-amber-200 focus:dark:bg-lime-200 border-amber-200 dark:border-emerald-700 focus:ring focus:ring-amber-300 focus:dark:ring-emerald-900 focus:ring-opacity-50";return(a,l)=>(c(),h(I,null,[n(t(ee),{title:a.$msg.registerNewUser},null,8,["title"]),be,n(ve,null,{default:j(()=>[s("form",{onSubmit:B(Q,["prevent"])},[s("div",Se,[s("h3",$e,i(a.$msg.registerNewUser),1),n(ue,{class:"mt-1"})]),s("div",null,[s("label",Ve,i(a.$msg.userId),1),S(s("input",{"onUpdate:modelValue":l[0]||(l[0]=o=>t(e).user_id=o),id:"register-userId",type:"text",class:"userFieldStyle",placeholder:a.$msg.userIdPlaceholder,onChange:l[1]||(l[1]=o=>t(m)(r,"user_id",t(e).user_id))},null,40,ke),[[P,t(e).user_id]]),n(g,{message:t(e).errors.user_id,class:"mt-2"},null,8,["message"])]),s("div",Ne,[s("label",Ce,i(a.$msg.password),1),n(z,{modelValue:t(e).password,"onUpdate:modelValue":l[2]||(l[2]=o=>t(e).password=o),id:"register-password",placeholder:a.$msg.passwordPlaceholder,textFieldClass:D,onChange:l[3]||(l[3]=o=>t(E)(r,"password",t(e).password))},null,8,["modelValue","placeholder"]),n(g,{message:t(e).errors.password,class:"mt-2"},null,8,["message"])]),s("div",xe,[s("label",Pe,i(a.$msg.passwordConfirmation),1),n(z,{modelValue:t(e).password_confirmation,"onUpdate:modelValue":l[4]||(l[4]=o=>t(e).password_confirmation=o),id:"register-password-confirmation",placeholder:a.$msg.passwordConfirmationPlaceholder,textFieldClass:D,onChange:l[5]||(l[5]=o=>t(E)(r,"password_confirmation",t(e).password_confirmation))},null,8,["modelValue","placeholder"]),n(g,{message:t(e).errors.password_confirmation,class:"mt-2"},null,8,["message"])]),s("div",Ue,[s("label",Ie,i(a.$msg.userName),1),S(s("input",{"onUpdate:modelValue":l[6]||(l[6]=o=>t(e).name=o),id:"register-userName",type:"text",class:"fieldStyle",placeholder:a.$msg.userNamePlaceholder,onChange:l[7]||(l[7]=o=>t(m)(r,"name",t(e).name))},null,40,Le),[[P,t(e).name]]),n(g,{message:t(e).errors.name,class:"mt-2"},null,8,["message"])]),s("div",Be,[s("label",Fe,i(a.$msg.email),1),S(s("input",{"onUpdate:modelValue":l[8]||(l[8]=o=>t(e).email=o),id:"register-email",type:"text",class:"fieldStyle",placeholder:a.$msg.emailPlaceholder,onChange:l[9]||(l[9]=o=>t(m)(r,"email",t(e).email))},null,40,Je),[[P,t(e).email]]),n(g,{message:t(e).errors.email,class:"mt-2"},null,8,["message"])]),s("div",Oe,[s("label",Ae,i(a.$msg.localePreferred),1),S(s("select",{"onUpdate:modelValue":l[10]||(l[10]=o=>b.value=o),id:"register-locale",class:"fieldStyle"},[s("option",Ee,"-- "+i(a.$msg.localeSelect)+" --",1),(c(!0),h(I,null,T(f.locales,o=>(c(),h("option",{value:o.id,key:o.id},i(o.name),9,Re))),128))],512),[[K,b.value]]),n(g,{message:t(e).errors.locale_id,class:"mt-2"},null,8,["message"])]),s("div",De,[s("label",Me,i(a.$msg.pronoun),1),S(s("select",{"onUpdate:modelValue":l[11]||(l[11]=o=>y.value=o),id:"register-pronoun",class:"fieldStyle"},[s("option",je,"-- "+i(a.$msg.pronounSelect)+" --",1),(c(!0),h(I,null,T(t(G),o=>(c(),h("option",{value:o.id,key:o.id},i(o.pronoun),9,Ke))),128))],512),[[K,y.value]]),n(g,{message:t(e).errors.pronoun_id,class:"mt-2"},null,8,["message"])]),s("div",Te,[s("span",ze,i(a.$msg.showName),1),n(U,{modelValue:p.value,"onUpdate:modelValue":l[12]||(l[12]=o=>p.value=o)},null,8,["modelValue"])]),s("div",qe,[s("span",{class:se(["labelSpanStyle",{"line-through":!p.value,"text-gray-400":!p.value}])},i(a.$msg.showPronoun),3),p.value?(c(),oe(U,{key:0,modelValue:k.value,"onUpdate:modelValue":l[13]||(l[13]=o=>k.value=o)},null,8,["modelValue"])):le("",!0)]),s("div",He,[s("span",Ze,i(a.$msg.showEmail),1),n(U,{modelValue:N.value,"onUpdate:modelValue":l[14]||(l[14]=o=>N.value=o)},null,8,["modelValue"])]),s("div",Ge,[s("span",Qe,i(a.$msg.showUserId),1),n(U,{modelValue:C.value,"onUpdate:modelValue":l[15]||(l[15]=o=>C.value=o)},null,8,["modelValue"])]),s("div",We,[s("label",Xe,i(a.$msg.captcha),1),s("div",Ye,[x.value!==null?(c(),h("img",{key:0,src:x.value},null,8,es)):(c(),h("div",ss,ls)),s("button",{class:"ml-4 py-2 px-4 text-xl font-semibold w-fit text-orange-700 dark:text-amber-100 border-2 border-orange-700 dark:border-amber-100 rounded-md cursor-pointer",onClick:B(L,["prevent"])},"↻",8,as)]),S(s("input",{"onUpdate:modelValue":l[16]||(l[16]=o=>t(e).captcha=o),id:"register-captcha",type:"text",class:"fieldStyle",placeholder:a.$msg.captchaPlaceholder,onKeydown:l[17]||(l[17]=ae(B(()=>{},["prevent"]),["enter"]))},null,40,ts),[[P,t(e).captcha]]),n(g,{message:t(R),class:"mt-2"},null,8,["message"])]),s("div",rs,[n(_e,{modelValue:t(e).processing,"onUpdate:modelValue":l[18]||(l[18]=o=>t(e).processing=o),disabled:t(e).processing,class:"w-36"},{default:j(()=>[te(i(a.$msg.save),1)]),_:1},8,["modelValue","disabled"])])],40,ye)]),_:1})],64))}},ws=pe(ns,[["__scopeId","data-v-7df753e0"]]);export{ws as default};
