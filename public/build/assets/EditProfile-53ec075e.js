import{t as V,K as A,r as w,o as F,b as m,c as p,a as r,d as e,s as C,e as j,F as P,y as U,T as H,z as y,u as a,A as K,w as $,Z as R,j as n,m as Z,i as E,g as x,v as I,B as L,k as D,n as G,l as J,f as O,p as Q,q as W,x as X}from"./app-fc43acbe.js";import{a as Y,_ as ee}from"./LocaleCycler-ac123a1e.js";import{_ as oe}from"./MustUpdateLocale-9301e073.js";import{a as se,_ as le,u as te}from"./SaveLocaleBeforeUnload-c1f030da.js";import{_ as S}from"./InputError-e17a39df.js";import{P as ae}from"./ProcessingButton-61732c7c.js";import{_ as k}from"./SwitchTwoState-0a2d165a.js";import{u as ne}from"./useCan-fd634704.js";const re={class:"w-full sm:max-w-md mt-6 px-6 py-4 bg-orange-100/80 dark:bg-green-800/80 shadow-md overflow-hidden sm:rounded-lg"},ie={key:0,class:"w-full sm:max-w-md mt-12 px-6 py-4 bg-orange-100/80 dark:bg-green-800/80 shadow-md overflow-hidden sm:rounded-lg"},de={__name:"HighDoubleLayout",setup(c){const _=V(A().props.background),g=w(null);return F(()=>{g.value.style.backgroundImage="url('"+_.img+"')",g.value.style.backgroundPosition=_.position}),(h,d)=>(m(),p(P,null,[r(oe),r(se),e("div",{class:"min-h-screen flex flex-col sm:justify-center items-center pt-6 sm:pt-0 bg-orange-200 dark:bg-green-600 border-b border-amber-100 dark:border-emerald-600 w-full h-[1280px] bg-cover",ref_key:"backgroundDiv",ref:g},[e("div",null,[r(Y)]),e("div",re,[C(h.$slots,"one")]),h.$slots.two?(m(),p("div",ie,[C(h.$slots,"two")])):j("",!0)],512)],64))}};const ue=c=>(Q("data-v-9c9322db"),c=c(),W(),c),me=ue(()=>e("audio",{id:"processingButtonAudio",src:"/audio/processingbutton1.mp3",preload:"auto"},null,-1)),ce={class:"flex justify-between items-start"},pe={class:"mt-1 mb-2 text-lg text-orange-700 dark:text-amber-100 font-semibold"},fe=["onSubmit"],_e={class:"mt-1"},ge={for:"profile-userName",class:"labelStyle"},he=["placeholder"],ve={class:"mt-4"},be={for:"profile-email",class:"labelStyle"},we=["placeholder"],ye={class:"mt-4"},$e={for:"profile-locale",class:"labelStyle"},xe={value:"0"},Se=["value"],ke={class:"mt-4"},Pe={for:"profile-pronoun",class:"labelStyle"},Ve={value:"0"},Ne=["value"],Be={class:"switchStyle"},Ce={class:"mr-3 text-orange-700 dark:text-amber-100"},Ue={class:"switchStyle"},Ee={class:"switchStyle"},Ie={class:"mr-3 text-orange-700 dark:text-amber-100"},Le={class:"switchStyle"},De={class:"mr-3 text-orange-700 dark:text-amber-100"},Ae={class:"mt-4 mb-2 flex flex-row-reverse"},Fe={class:"flex flex-col"},je={class:"mb-4 text-orange-800 dark:text-amber-100"},Me={class:"flex flex-row-reverse"},Te={__name:"EditProfile",props:{locales:{type:Array},pronouns:{type:Array}},setup(c){const _=c;let{changeLocaleAxios:g}=te(),{can:h}=ne();const d=X(),M=s=>{d.appContext.config.globalProperties.$setLocale(s),g(s)},u=U(()=>A().props.auth.user),i=w(!!u.value.show_name),f=w(!!u.value.show_pronoun),N=String(u.value.locale_id),v=w(N),T=V(_.locales),z=U(()=>V(_.pronouns).filter(o=>o.locale_id===Number(v.value))),B=String(u.value.pronoun_id),b=w(B),l=H({name:u.value.name,email:u.value.email,locale_id:N,pronoun_id:B,show_name:i.value,show_pronoun:f.value,show_email:!!u.value.show_email,show_user_id:!!u.value.show_user_id}),q=()=>{document.getElementById("processingButtonAudio").play(),l.patch(route("profile.edit"),{onSuccess:()=>{l.isDirty?d.appContext.config.globalProperties.$setFlash(d.appContext.config.globalProperties.$msg.success,d.appContext.config.globalProperties.$msg.successUpdateProfile):d.appContext.config.globalProperties.$setFlash(d.appContext.config.globalProperties.$msg.information,d.appContext.config.globalProperties.$msg.infoNotUpdateProfile,"info")}})};return F(()=>{document.getElementById("profile-userName").focus()}),y(v,()=>{let s=Number(v.value);if(l.locale_id=s,s>0){const t=T.find(o=>o.id===s);M(t.locale)}b.value="0",l.pronoun_id=0}),y(b,()=>{l.pronoun_id=Number(b.value)}),y(i,()=>{l.show_name=i.value,i.value||(f.value=!1,l.show_pronoun=!1)}),y(f,()=>{l.show_pronoun=f.value}),(s,t)=>(m(),p(P,null,[r(a(R),{title:s.$msg.profileEdit},null,8,["title"]),me,r(de,null,K({one:$(()=>[e("div",ce,[e("h3",pe,n(s.$msg.profileEdit),1),r(ee,{class:"mt-1"})]),e("form",{onSubmit:O(q,["prevent"])},[e("div",_e,[e("label",ge,n(s.$msg.userName),1),x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>a(l).name=o),id:"profile-userName",type:"text",class:"fieldStyle",placeholder:s.$msg.userNamePlaceholder},null,8,he),[[I,a(l).name]]),r(S,{message:a(l).errors.name,class:"mt-2"},null,8,["message"])]),e("div",ve,[e("label",be,n(s.$msg.email),1),x(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>a(l).email=o),id:"profile-userName",type:"text",class:"fieldStyle",placeholder:s.$msg.emailPlaceholder},null,8,we),[[I,a(l).email]]),r(S,{message:a(l).errors.email,class:"mt-2"},null,8,["message"])]),e("div",ye,[e("label",$e,n(s.$msg.localePreferred),1),x(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>v.value=o),id:"profile-locale",class:"fieldStyle"},[e("option",xe,"-- "+n(s.$msg.localeSelect)+" --",1),(m(!0),p(P,null,D(c.locales,o=>(m(),p("option",{value:o.id,key:o.id},n(o.name),9,Se))),128))],512),[[L,v.value]]),r(S,{message:a(l).errors.locale_id,class:"mt-2"},null,8,["message"])]),e("div",ke,[e("label",Pe,n(s.$msg.pronoun),1),x(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>b.value=o),id:"profile-pronoun",class:"fieldStyle"},[e("option",Ve,"-- "+n(s.$msg.pronounSelect)+" --",1),(m(!0),p(P,null,D(a(z),o=>(m(),p("option",{value:o.id,key:o.id},n(o.pronoun),9,Ne))),128))],512),[[L,b.value]]),r(S,{message:a(l).errors.pronoun_id,class:"mt-2"},null,8,["message"])]),e("div",Be,[e("span",Ce,n(s.$msg.showName),1),r(k,{modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=o=>i.value=o)},null,8,["modelValue"])]),e("div",Ue,[e("span",{class:G(["mr-3 text-orange-700 dark:text-amber-100",{"line-through":!i.value,"text-gray-400":!i.value}])},n(s.$msg.showPronoun),3),i.value?(m(),J(k,{key:0,modelValue:f.value,"onUpdate:modelValue":t[5]||(t[5]=o=>f.value=o)},null,8,["modelValue"])):j("",!0)]),e("div",Ee,[e("span",Ie,n(s.$msg.showEmail),1),r(k,{modelValue:a(l).show_email,"onUpdate:modelValue":t[6]||(t[6]=o=>a(l).show_email=o)},null,8,["modelValue"])]),e("div",Le,[e("span",De,n(s.$msg.showUserId),1),r(k,{modelValue:a(l).show_user_id,"onUpdate:modelValue":t[7]||(t[7]=o=>a(l).show_user_id=o)},null,8,["modelValue"])]),e("div",Ae,[r(ae,{modelValue:a(l).processing,"onUpdate:modelValue":t[8]||(t[8]=o=>a(l).processing=o),class:"w-36"},{default:$(()=>[E(n(s.$msg.save),1)]),_:1},8,["modelValue"])])],40,fe)]),_:2},[a(h)("profile.delete")?{name:"two",fn:$(()=>[e("div",Fe,[e("p",je,n(s.$msg.profileDeletePreText),1),e("div",Me,[r(a(Z),{href:s.route("profile.predelete"),method:"post",as:"button",type:"button",class:"mt-1 mb-2 w-[208px] px-3 py-2 bg-red-500 text-amber-50 font-semibold text-sm flex justify-center place-items-center uppercase rounded"},{default:$(()=>[E(n(s.$msg.profileDelete),1)]),_:1},8,["href"])])])]),key:"0"}:void 0]),1024)],64))}},Oe=le(Te,[["__scopeId","data-v-9c9322db"]]);export{Oe as default};
